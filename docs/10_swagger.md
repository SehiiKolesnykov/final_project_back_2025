# Swagger API Documentation

## Огляд

Проект використовує SpringDoc OpenAPI для автоматичної генерації та відображення документації REST API. Swagger UI надає інтерактивний інтерфейс для тестування всіх ендпоінтів API.

## Технології

- **SpringDoc OpenAPI** - бібліотека для інтеграції Swagger з Spring Boot
- **OpenAPI 3.0** - специфікація для опису REST API
- **Swagger UI** - веб-інтерфейс для перегляду та тестування API

## Доступ до Swagger UI

### Production

Swagger UI доступний за наступними адресами:

- `https://widi-rho.vercel.app/swagger-ui.html`
- `https://widi-rho.vercel.app/swagger-ui/index.html`
- `https://widi-rho.vercel.app/v3/api-docs` - JSON специфікація OpenAPI

### Локальна розробка

При запуску на локальному сервері:

- `http://localhost:9000/swagger-ui.html`
- `http://localhost:9000/swagger-ui/index.html`
- `http://localhost:9000/v3/api-docs`

## Налаштування безпеки

Swagger UI та API документація доступні без автентифікації. Це налаштовано в `SecurityConfig` через дозвіл доступу до наступних шляхів:

- `/swagger-ui/**`
- `/swagger-ui.html`
- `/v3/api-docs/**`
- `/swagger-resources/**`
- `/webjars/**`

## Автентифікація в Swagger

Більшість ендпоінтів API вимагають JWT автентифікації. Для тестування захищених ендпоінтів у Swagger UI:

1. Отримайте JWT токен через ендпоінт `/api/auth/login` або `/api/auth/register`
2. Натисніть кнопку "Authorize" у верхній частині Swagger UI
3. Введіть токен у форматі: `Bearer <ваш_токен>`
4. Натисніть "Authorize" для збереження токену
5. Тепер всі захищені запити будуть автоматично включати заголовок `Authorization: Bearer <токен>`

## Структура документації

Swagger автоматично генерує документацію на основі анотацій у контролерах:

- `@Tag` - групує ендпоінти за категоріями (наприклад, "Chat", "User", "Posts")
- `@Operation` - описує конкретний ендпоінт (summary, description)
- `@ApiResponse` - описує можливі відповіді (коди статусів, описи помилок)
- `@Parameter` - описує параметри запиту
- `@Schema` - описує структуру моделей даних

## Основні категорії API

Документація організована за наступними категоріями:

- **Authentication** - реєстрація та авторизація користувачів
- **User** - управління профілями користувачів
- **Posts** - створення та управління постами
- **Comments** - коментарі до постів
- **Likes** - лайки до постів
- **Chat** - чат та повідомлення
- **Upload** - завантаження файлів
- **Follow** - підписки на користувачів
- **Notifications** - сповіщення

## Тестування ендпоінтів

Swagger UI дозволяє:

1. Переглядати всі доступні ендпоінти
2. Переглядати структуру запитів та відповідей
3. Відправляти тестові запити безпосередньо з браузера
4. Переглядати приклади JSON для запитів та відповідей
5. Переглядати коди помилок та їх описи

## Конфігурація

Конфігурація Swagger знаходиться в класі `SwaggerConfig`:

- **Base URL** - встановлено як `https://widi-rho.vercel.app` для production
- **API Title** - "Step Project Backend API"
- **Version** - "1.0.0"
- **Security Scheme** - Bearer Authentication (JWT)

## Залежності

Для роботи Swagger необхідна наступна залежність у `pom.xml`:

```xml
<dependency>
    <groupId>org.springdoc</groupId>
    <artifactId>springdoc-openapi-starter-webmvc-ui</artifactId>
    <version>2.2.0</version>
</dependency>
```

## Приклади використання

### Перегляд всіх ендпоінтів

Відкрийте Swagger UI та перегляньте список всіх доступних ендпоінтів, згрупованих за категоріями.

### Тестування публічних ендпоінтів

Публічні ендпоінти (наприклад, `/api/auth/login`) можна тестувати без автентифікації.

### Тестування захищених ендпоінтів

1. Спочатку отримайте токен через `/api/auth/login`
2. Авторизуйтеся в Swagger UI
3. Тестуйте захищені ендпоінти

## Обмеження

- Swagger UI доступний тільки для перегляду та тестування API
- Реальні дані зберігаються в базі даних
- Деякі операції можуть мати додаткові обмеження на рівні бізнес-логіки

## Додаткова інформація

Для детальної інформації про конкретні ендпоінти дивіться відповідні розділи документації:

- Authentication - `docs/01-authentication.md`
- Posts - `docs/02-posts.md`
- Comments - `docs/03-comments.md`
- Chat - `docs/09-websockets.md`

